{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Somayeh\\\\Documents\\\\GitHub\\\\ReactProject\\\\src\\\\screen\\\\movies\\\\New.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Input from '../../component/Input';\nimport Form from '../../component/Form';\nimport Select from '../../component/Select';\nimport { getGenres } from '../../services/fakeGenreService';\nimport { getMovies, saveMovie, getMovie } from '../../services/fakeMoviesService';\nimport { useLocation, useNavigate, useParams } from 'react-router-dom';\nimport Button from '../../component/Button';\nimport Joi from 'joi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet movie = {\n  title: '',\n  genreId: '',\n  numberInStock: '',\n  dailyRentalRate: ''\n};\n\nfunction New(props) {\n  _s();\n\n  const [errors, setErrors] = useState('');\n  const [title, setTitle] = useState('');\n  const [numberInStock, setNumberInStock] = useState(movie.numberInStock);\n  const [rate, setRate] = useState(movie.rate);\n  const [genre, setGenre] = useState('');\n  const [genreName, setGenreName] = useState('');\n  let params = useParams();\n  let navigate = useNavigate();\n  useEffect(() => {\n    if (params.id) {\n      movie = getMovie(params.id);\n      if (!movie) navigate('/NotFound');else {\n        setTitle(movie.title);\n        setNumberInStock(movie.numberInStock);\n        setRate(movie.dailyRentalRate);\n        setGenre(movie.genre._id);\n        setGenreName(movie.genre.name);\n      }\n    }\n  }, []);\n  var schema = Joi.object().keys({\n    Title: Joi.string().required(),\n    NumberInStock: Joi.number().min(0).max(10).required(),\n    Genre: Joi.required(),\n    Rate: Joi.number().required()\n  });\n\n  const handleSubmit = e => {\n    e.preventDefault(); // try {\n\n    const {\n      error\n    } = schema.validate({\n      Title: title,\n      NumberInStock: numberInStock,\n      Rate: rate,\n      Genre: genre\n    });\n    error ? setErrors(error.details[0].message) : setErrors('');\n    if (error) setErrors(error.details[0].message);\n    movie.title = title;\n    movie.genreId = genre;\n    movie.numberInStock = numberInStock;\n    movie.dailyRentalRate = rate;\n    const id = saveMovie(movie);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    onSubmit: handleSubmit,\n    errors: errors,\n    children: [/*#__PURE__*/_jsxDEV(Input, {\n      lable: \"Title\",\n      name: \"Title\",\n      value: title,\n      onChange: e => setTitle(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Select, {\n      lable: \"Genres\",\n      id: \"genres\",\n      value: genre,\n      data: getGenres(),\n      onChange: e => {\n        setGenre(e.target.value);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      lable: \"Number In Stock\",\n      name: \"NumberInStock\",\n      value: numberInStock,\n      onChange: e => setNumberInStock(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      lable: \"Rate\",\n      name: \"Rate\",\n      value: rate,\n      onChange: e => setRate(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      lable: \"Save\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n\n_s(New, \"AcrK9sx2FV8n5lo3pGA7Y8gky80=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = New;\nexport default New;\n\nvar _c;\n\n$RefreshReg$(_c, \"New\");","map":{"version":3,"names":["React","useState","useEffect","Input","Form","Select","getGenres","getMovies","saveMovie","getMovie","useLocation","useNavigate","useParams","Button","Joi","movie","title","genreId","numberInStock","dailyRentalRate","New","props","errors","setErrors","setTitle","setNumberInStock","rate","setRate","genre","setGenre","genreName","setGenreName","params","navigate","id","_id","name","schema","object","keys","Title","string","required","NumberInStock","number","min","max","Genre","Rate","handleSubmit","e","preventDefault","error","validate","details","message","target","value"],"sources":["C:/Users/Somayeh/Documents/GitHub/ReactProject/src/screen/movies/New.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport Input from '../../component/Input'\r\nimport Form from '../../component/Form'\r\nimport Select from '../../component/Select'\r\nimport { getGenres } from '../../services/fakeGenreService'\r\nimport {\r\n  getMovies,\r\n  saveMovie,\r\n  getMovie,\r\n} from '../../services/fakeMoviesService'\r\nimport { useLocation, useNavigate, useParams } from 'react-router-dom'\r\n\r\nimport Button from '../../component/Button'\r\nimport Joi from 'joi'\r\n\r\nlet movie = {\r\n  title: '',\r\n  genreId: '',\r\n  numberInStock: '',\r\n  dailyRentalRate: '',\r\n}\r\nfunction New(props) {\r\n  const [errors, setErrors] = useState('')\r\n  const [title, setTitle] = useState('')\r\n  const [numberInStock, setNumberInStock] = useState(movie.numberInStock)\r\n  const [rate, setRate] = useState(movie.rate)\r\n  const [genre, setGenre] = useState('')\r\n  const [genreName, setGenreName] = useState('')\r\n\r\n  let params = useParams()\r\n  let navigate = useNavigate()\r\n\r\n  useEffect(() => {\r\n    if (params.id) {\r\n      movie = getMovie(params.id)\r\n      if (!movie) navigate('/NotFound')\r\n      else {\r\n        setTitle(movie.title)\r\n        setNumberInStock(movie.numberInStock)\r\n        setRate(movie.dailyRentalRate)\r\n        setGenre(movie.genre._id)\r\n        setGenreName(movie.genre.name)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  var schema = Joi.object().keys({\r\n    Title: Joi.string().required(),\r\n    NumberInStock: Joi.number().min(0).max(10).required(),\r\n    Genre: Joi.required(),\r\n    Rate: Joi.number().required(),\r\n  })\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    // try {\r\n    const { error } = schema.validate({\r\n      Title: title,\r\n      NumberInStock: numberInStock,\r\n      Rate: rate,\r\n      Genre: genre,\r\n    })\r\n    error ? setErrors(error.details[0].message) : setErrors('')\r\n    if (error) setErrors(error.details[0].message)\r\n\r\n    movie.title = title\r\n    movie.genreId = genre\r\n    movie.numberInStock = numberInStock\r\n    movie.dailyRentalRate = rate\r\n\r\n    const id = saveMovie(movie)\r\n  }\r\n  return (\r\n    <Form onSubmit={handleSubmit} errors={errors}>\r\n      <Input\r\n        lable=\"Title\"\r\n        name=\"Title\"\r\n        value={title}\r\n        onChange={(e) => setTitle(e.target.value)}\r\n      ></Input>\r\n      <Select\r\n        lable=\"Genres\"\r\n        id=\"genres\"\r\n        value={genre}\r\n        data={getGenres()}\r\n        onChange={(e) => {\r\n          setGenre(e.target.value)\r\n        }}\r\n      ></Select>\r\n      <Input\r\n        lable=\"Number In Stock\"\r\n        name=\"NumberInStock\"\r\n        value={numberInStock}\r\n        onChange={(e) => setNumberInStock(e.target.value)}\r\n      ></Input>\r\n      <Input\r\n        lable=\"Rate\"\r\n        name=\"Rate\"\r\n        value={rate}\r\n        onChange={(e) => setRate(e.target.value)}\r\n      ></Input>\r\n      <Button lable=\"Save\"></Button>\r\n    </Form>\r\n  )\r\n}\r\n\r\nexport default New\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}